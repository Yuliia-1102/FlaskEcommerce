{% extends 'base.html' %}

{% block title %} Home {% endblock %}

{% block body %}

<div class="container text-center">
    <div class="row m-3">

      <div class="col" style="margin: 3px;">

        <div class="list-group" id="right1"> {# aria-hidden - щоб РІДЕР не читав класи, а тільки текст - Супермаркет #}

            {% set icons = {
                'Supermarket': 'fa fa-shopping-basket',
                'Health & Beauty': 'fa fa-user',
                'Home & Office': 'fa-solid fa-comment',
                'Fashion': 'fa fa-camera',
                'Electronics': 'fa fa-audio-description',
                'Gaming': 'fa fa-cubes',
                'Baby Products': 'fa fa-child',
                'Sporting Goods': 'fa fa-bicycle',
                'Garden & Outdoor': 'fa fa-binoculars'
            } %}

            {% for category in categories %}
            <a href="/categories/{{ category.id }}" class="list-group-item list-group-item-action">
                <i class="{{ icons.get(category.category_name) }}" aria-hidden="true"></i> {{ category.category_name }}
            </a>

            {% endfor %}
        </div>

      </div>


      <div class="col-md-7" style="margin: 3px;">
        <img src="../static/images/onCenter2.gif" alt="" style="width: 600px; height: 365px; border-radius: 10px;">
      </div>

      <div class="col-md-2" style="margin: 3px">
          <div class="row">
            <div class="col">
                <img src="../static/images/saveOperation.gif" alt="" class="right2">
            </div>
          </div>

          <div class="row" style="margin-top: 12px;">
            <div class="col">
                <img src="../static/images/HappyAmazon.gif" alt="" class="right2">
            </div>
          </div>
      </div>

    </div>
</div>


<div class="container text-center">
    <div class="row" style="margin: 8px;">
        <div class="col" style="display: flex; background-color: white; border-radius: 10px; padding: 7px; margin: 5px;">
            <img src="../static/images/FreeDelivery.png" style="width: 30px; height: 30px;" alt="">
            <h6 style="margin: 4px">Various Categories</h6>
        </div>
        <div class="col" style="display: flex; background-color: white; border-radius: 10px; padding: 7px; margin: 5px;">
            <img src="../static/images/food.png" style="width: 30px; height: 30px;" alt="">
            <h6 style="margin: 4px">Amazon Food</h6>
        </div>
        <div class="col" style="display: flex; background-color: white; border-radius: 10px; padding: 7px; margin: 5px;">
            <img src="../static/images/airtime.png" style="width: 30px; height: 30px;" alt="">
            <h6 style="margin: 4px">Quick Transaction</h6>
        </div>
    </div>
</div>


<div class="container text-center">
    <div class="row" style="margin: 8px; background-color: rgb(219, 218, 218);" id="column">

        {% for item in items %}

        {% if item.in_stock > 0 %}
        <div class="col position-relative p-3" style="background-color: white;">

            <img src="{{ item.product_picture }}" alt="Photo of {{ item.product_picture }}" style="height: 212px; width: auto; border-radius: 10px;">

            <button class="btn position-absolute top-0 end-0" data-bs-toggle="modal" data-bs-target="#modal{{ item.id }}">
                <i class="fa-solid fa-circle-info"></i>
            </button>

            <div class="row" style="margin-top: 5px;">
                <h6 style="color: gray;"> {{ item.product_name }} </h6>
            </div>

            <div class="row" style="margin-top: 10px;">
                <div class="col">
                    <h5 style="font-weight: 600; font-family: 'Times New Roman', Times, serif;">{{ item.current_price }} UAH</h5>
                    {% if item.previous_price|float > item.current_price %}
                        <strike><p style="color: gray;"> {{ item.previous_price }} UAH</p></strike>
                    {% endif %}
                </div>

                <div class="col">
                    {% if current_user.id != 1 %}
                        <a href="/add-to-cart/{{ item.id }}">Add</a>
                    {% else %}
                        <a>Add</a>
                    {% endif %}

                    {% if item.previous_price|float > item.current_price %}
                         <h5 style="color: red; margin-top: 15px"> -{{ item.discount }}%</h5>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <p>{{ item.in_stock }} items left</p>
            </div>
        </div>

        {% else %}
         <div class="col position-relative p-3" style="background-color: white; filter: grayscale(100%);">
            <img src="{{ item.product_picture }}" alt="Photo of {{ item.product_picture }}" style="height: 212px; width: auto; border-radius: 10px;">

            <button class="btn position-absolute top-0 end-0" data-bs-toggle="modal" data-bs-target="#modal{{ item.id }}">
                <i class="fa-solid fa-circle-info"></i>
            </button>

            <div class="row" style="margin-top: 5px;">
                 <h6 style="color: gray;"> {{ item.product_name }} </h6>
            </div>

            <div class="row" style="margin-top: 10px;">
                <div class="col">
                    <h5 style="font-weight: 600; font-family: 'Times New Roman', Times, serif;  color: gray;">{{ item.current_price }} UAH</h5>
                    {% if item.previous_price|float > item.current_price %}
                        <strike><p style="color: gray;"> {{ item.previous_price }} UAH</p></strike>
                    {% endif %}
                </div>

                <div class="col">
                    {% if item.previous_price|float > item.current_price %}
                         <h5 style="color: gray; margin-top: 15px"> -{{ item.discount }}%</h5>
                    {% endif %}
                </div>
            </div>

            <div class="row">
                <strong>Not in stock</strong>
            </div>
        </div>
        {% endif %}

        {% endfor %}

    </div>

{% for item in items %}
    <div class="modal fade" id="modal{{ item.id }}" tabindex="-1" aria-labelledby="modalLabel{{ item.id }}" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">

                    <div class="modal-header">
                        <h5 class="modal-title" id="modalLabel{{ item.id }}">{{ item.product_name }}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>

                    <div class="modal-body">
                        <p style="text-align: justify">{{ item.product_description }}</p>
                    </div>

                </div>
            </div>
        </div>
{% endfor %}

</div>

{% endblock %}