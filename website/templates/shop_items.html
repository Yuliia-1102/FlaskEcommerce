{% extends 'base.html' %}

{% block title %} Shop items {% endblock %}

{% block body %}

{# Jinja2 – це шаблонний движок (template engine) для Python. Тобто код пайтон в HTML.
   = len(items) < 1 #}
{% if items | length < 1 %}
<h3 style="color: white;">No shop items</h3>

{% else %}

<style>
    .item-zero td{
        color: #ff6666;
    }
</style>

{#    tr - table row, th - table header, td - table data
      table-hover = коли наводиш курсор, то рядок підсвічується#}
<table class="table table-dark table-bordered table-hover">
        <tr>
            <th>Date added</th>
            <th>Product name</th>
            <th>Previous price (UAH)</th>
            <th>Current price (UAH)</th>
            <th>In stock</th>
            <th>Categories</th>
            <th>Product description</th>
            <th>Product picture</th>
            <th>Action</th>
        </tr>

        {% for item in items %}
        <tr class="{% if item.in_stock == 0 %}
                   item-zero
                   {% endif %}">

            <td>{{ item.date_added.strftime("%d/%m/%Y, %H:%M:%S") }}</td>
            <td>{{ item.product_name }}</td>
            <td>{{ item.previous_price }}</td>
            <td>{{ item.current_price }}</td>
            <td>{{ item.in_stock }}</td>

            <td>
               <ul>
                 {% for category in item.categories %}
                    <li>{{ category.category_name }}</li>
                 {% endfor %}
               </ul>
            </td>

            <td style="max-width: 300px">
                <p style="text-align: justify">{{ item.product_description[:50] }}
                    <span id="dots{{ item.id }}">...</span>
                    <span id="more{{ item.id }}" style="display: none"> {{ item.product_description[50:] }}</span>
                </p>
            <button onclick="myFunction('{{ item.id }}')" id="myBtn{{ item.id }}">Read more</button>
            </td>

            {% if item.in_stock < 1 %}
            <td><img src="{{ item.product_picture }}" alt="{{ item.product_name }} photo" style="filter: grayscale(100%); height: 50px; width: 50px; border-radius: 2px;"></td>
            {% else %}
            <td><img src="{{ item.product_picture }}" alt="{{ item.product_name }} photo" style="height: 50px; width: 50px; border-radius: 2px;"></td>
            {% endif %}

            <td>
                <a href="/update-item/{{ item.id }}">Update</a>
                <br>
                <a href="/delete-item/{{ item.id }}">Delete</a>
            </td>
        </tr>
        {% endfor %}

</table>

{% endif %}

{% endblock %}